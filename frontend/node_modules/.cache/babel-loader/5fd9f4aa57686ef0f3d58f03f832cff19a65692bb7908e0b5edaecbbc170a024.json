{"ast":null,"code":"import _objectSpread from\"C:/Users/nagas/Desktop/Uparkweb/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{requestOtp,verifyOtp,checkPhone,updateVehicles,testBackendConnection}from'../services/api';import'./login.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Signup(){// Steps: phone -> (exists? otp) : name -> otp -> vehicles -> dashboard\nconst[step,setStep]=useState('phone');// phone | name | otp | vehicles\nconst[name,setName]=useState('');const[phone,setPhone]=useState('');const[code,setCode]=useState('');const[loading,setLoading]=useState(false);const[message,setMessage]=useState('');const[devCode,setDevCode]=useState('');const navigate=useNavigate();const[vehicles,setVehicles]=useState([{type:'4W',numberPlate:''}]);const[backendStatus,setBackendStatus]=useState('checking');// checking | ok | error\n// Test backend connection on component mount\nuseEffect(()=>{const testConnection=async()=>{try{await testBackendConnection();setBackendStatus('ok');console.log('✅ Backend is reachable');}catch(error){setBackendStatus('error');setMessage(\"Backend connection failed: \".concat(error.message));console.error('❌ Backend connection failed:',error);}};testConnection();},[]);// Step 1: Enter phone; if exists, send OTP; else ask for name then send OTP\nconst handleCheckPhone=async e=>{e.preventDefault();setLoading(true);setMessage('');try{const phoneTrim=phone.trim();const res=await checkPhone({phone:phoneTrim});if(res.exists){var _res$user;// Existing user: request real OTP directly\nconst req=await requestOtp({name:((_res$user=res.user)===null||_res$user===void 0?void 0:_res$user.name)||'',phone:phoneTrim});// Do not show dev OTP unless backend is in dev mode\nif(req.devCode)setDevCode(req.devCode);setStep('otp');setMessage('OTP sent. Please check your phone.');}else{setStep('name');}}catch(err){setMessage(err.message);}finally{setLoading(false);}};const handleRequestOtp=async e=>{e.preventDefault();setLoading(true);setMessage('');try{const nameTrim=name.trim();const phoneTrim=phone.trim();const res=await requestOtp({name:nameTrim,phone:phoneTrim});if(res.devCode)setDevCode(res.devCode);setStep('otp');setMessage('OTP sent. Please check your phone.');}catch(err){setMessage(err.message);}finally{setLoading(false);}};const handleVerifyOtp=async e=>{e.preventDefault();setLoading(true);setMessage('');try{const phoneTrim=phone.trim();const codeDigits=(code||'').toString().replace(/\\D/g,'');const res=await verifyOtp({phone:phoneTrim,code:codeDigits});// Persist a simple session token and user in localStorage\nlocalStorage.setItem('upark_token',res.token);localStorage.setItem('upark_user',JSON.stringify(res.user));// Mark time of auth for potential guards\nlocalStorage.setItem('upark_authed_at',String(Date.now()));// Proceed to collect vehicles for first-time user\nsetStep('vehicles');}catch(err){setMessage(err.message);}finally{setLoading(false);}};const handleVehiclesSubmit=async e=>{e.preventDefault();setLoading(true);setMessage('');try{const phoneTrim=phone.trim();const normalized=vehicles.map(v=>({type:v.type==='2W'?'2W':'4W',numberPlate:(v.numberPlate||'').trim()})).filter(v=>v.numberPlate);if(normalized.length===0){setMessage('Please add at least one vehicle with a number plate.');setLoading(false);return;}const res=await updateVehicles({phone:phoneTrim,vehicles:normalized});localStorage.setItem('upark_user',JSON.stringify(res.user));// Go to dashboard finally\nnavigate('/',{replace:true});setTimeout(()=>{if(window.location.pathname!=='/')window.location.replace('/');},200);}catch(err){setMessage(err.message);}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"auth-container\",children:[step==='phone'&&/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleCheckPhone,className:\"auth-form\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Welcome\"}),backendStatus==='checking'&&/*#__PURE__*/_jsx(\"div\",{style:{padding:'8px',background:'#fff3cd',border:'1px solid #ffeaa7',borderRadius:'4px',marginBottom:'10px'},children:\"\\uD83D\\uDD04 Connecting to server...\"}),backendStatus==='error'&&/*#__PURE__*/_jsx(\"div\",{style:{padding:'8px',background:'#f8d7da',border:'1px solid #f5c6cb',borderRadius:'4px',marginBottom:'10px'},children:\"\\u274C Cannot connect to backend server\"}),backendStatus==='ok'&&/*#__PURE__*/_jsx(\"div\",{style:{padding:'8px',background:'#d4edda',border:'1px solid #c3e6cb',borderRadius:'4px',marginBottom:'10px'},children:\"\\u2705 Connected to server\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",placeholder:\"Phone number (E.164, e.g. +91XXXXXXXXXX)\",value:phone,onChange:e=>setPhone(e.target.value),required:true}),/*#__PURE__*/_jsx(\"small\",{style:{marginBottom:8,display:'block'},children:\"Enter your phone number in E.164 format. Example: +91XXXXXXXXXX\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading||backendStatus!=='ok',children:loading?'Checking…':backendStatus==='checking'?'Connecting...':'Continue'}),message&&/*#__PURE__*/_jsx(\"p\",{className:\"auth-message\",children:message})]}),step==='name'&&/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleRequestOtp,className:\"auth-form\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Complete Signup\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Full name\",value:name,onChange:e=>setName(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",placeholder:\"Phone number (E.164, e.g. +91XXXXXXXXXX)\",value:phone,onChange:e=>setPhone(e.target.value),required:true,disabled:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,children:loading?'Sending…':'Send OTP'}),message&&/*#__PURE__*/_jsx(\"p\",{className:\"auth-message\",children:message}),devCode&&/*#__PURE__*/_jsxs(\"p\",{className:\"auth-message dev\",children:[\"Dev OTP: \",devCode]})]}),step==='otp'&&/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleVerifyOtp,className:\"auth-form\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Enter OTP\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"6-digit code\",value:code,onChange:e=>setCode(e.target.value),required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,children:loading?'Verifying…':'Verify'}),message&&/*#__PURE__*/_jsx(\"p\",{className:\"auth-message\",children:message}),devCode&&/*#__PURE__*/_jsxs(\"p\",{className:\"auth-message dev\",children:[\"Dev OTP: \",devCode]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",disabled:loading,onClick:()=>setStep('name'),children:\"Change details\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",disabled:loading,onClick:()=>window.location.href='/',title:\"Go to dashboard\",children:\"Go to Dashboard\"})]})]}),step==='vehicles'&&/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleVehiclesSubmit,className:\"auth-form\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Your Vehicles\"}),vehicles.map((v,idx)=>/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:8},children:[/*#__PURE__*/_jsxs(\"select\",{value:v.type,onChange:e=>{const next=[...vehicles];next[idx]=_objectSpread(_objectSpread({},next[idx]),{},{type:e.target.value});setVehicles(next);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"2W\",children:\"2 Wheeler\"}),/*#__PURE__*/_jsx(\"option\",{value:\"4W\",children:\"4 Wheeler\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Number plate\",value:v.numberPlate,onChange:e=>{const next=[...vehicles];next[idx]=_objectSpread(_objectSpread({},next[idx]),{},{numberPlate:e.target.value});setVehicles(next);},required:true}),vehicles.length>1&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setVehicles(vehicles.filter((_,i)=>i!==idx)),children:\"Remove\"})]},idx)),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setVehicles([...vehicles,{type:'4W',numberPlate:''}]),children:\"+ Add vehicle\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,children:loading?'Saving…':'Save & Continue'}),message&&/*#__PURE__*/_jsx(\"p\",{className:\"auth-message\",children:message})]})]});}","map":{"version":3,"names":["React","useState","useEffect","useNavigate","requestOtp","verifyOtp","checkPhone","updateVehicles","testBackendConnection","jsx","_jsx","jsxs","_jsxs","Signup","step","setStep","name","setName","phone","setPhone","code","setCode","loading","setLoading","message","setMessage","devCode","setDevCode","navigate","vehicles","setVehicles","type","numberPlate","backendStatus","setBackendStatus","testConnection","console","log","error","concat","handleCheckPhone","e","preventDefault","phoneTrim","trim","res","exists","_res$user","req","user","err","handleRequestOtp","nameTrim","handleVerifyOtp","codeDigits","toString","replace","localStorage","setItem","token","JSON","stringify","String","Date","now","handleVehiclesSubmit","normalized","map","v","filter","length","setTimeout","window","location","pathname","className","children","onSubmit","style","padding","background","border","borderRadius","marginBottom","placeholder","value","onChange","target","required","display","disabled","justifyContent","onClick","href","title","idx","gap","next","_objectSpread","_","i"],"sources":["C:/Users/nagas/Desktop/Uparkweb/frontend/src/pages/Signup.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { requestOtp, verifyOtp, checkPhone, updateVehicles, testBackendConnection } from '../services/api';\r\nimport './login.css';\r\n\r\nexport default function Signup() {\r\n  // Steps: phone -> (exists? otp) : name -> otp -> vehicles -> dashboard\r\n  const [step, setStep] = useState('phone'); // phone | name | otp | vehicles\r\n  const [name, setName] = useState('');\r\n  const [phone, setPhone] = useState('');\r\n  const [code, setCode] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [message, setMessage] = useState('');\r\n  const [devCode, setDevCode] = useState('');\r\n  const navigate = useNavigate();\r\n  const [vehicles, setVehicles] = useState([{ type: '4W', numberPlate: '' }]);\r\n  const [backendStatus, setBackendStatus] = useState('checking'); // checking | ok | error\r\n\r\n  // Test backend connection on component mount\r\n  useEffect(() => {\r\n    const testConnection = async () => {\r\n      try {\r\n        await testBackendConnection();\r\n        setBackendStatus('ok');\r\n        console.log('✅ Backend is reachable');\r\n      } catch (error) {\r\n        setBackendStatus('error');\r\n        setMessage(`Backend connection failed: ${error.message}`);\r\n        console.error('❌ Backend connection failed:', error);\r\n      }\r\n    };\r\n    \r\n    testConnection();\r\n  }, []);\r\n\r\n  // Step 1: Enter phone; if exists, send OTP; else ask for name then send OTP\r\n  const handleCheckPhone = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setMessage('');\r\n    try {\r\n      const phoneTrim = phone.trim();\r\n      const res = await checkPhone({ phone: phoneTrim });\r\n      if (res.exists) {\r\n        // Existing user: request real OTP directly\r\n        const req = await requestOtp({ name: res.user?.name || '', phone: phoneTrim });\r\n        // Do not show dev OTP unless backend is in dev mode\r\n        if (req.devCode) setDevCode(req.devCode);\r\n        setStep('otp');\r\n        setMessage('OTP sent. Please check your phone.');\r\n      } else {\r\n        setStep('name');\r\n      }\r\n    } catch (err) {\r\n      setMessage(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleRequestOtp = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setMessage('');\r\n    try {\r\n      const nameTrim = name.trim();\r\n      const phoneTrim = phone.trim();\r\n      const res = await requestOtp({ name: nameTrim, phone: phoneTrim });\r\n      if (res.devCode) setDevCode(res.devCode);\r\n      setStep('otp');\r\n      setMessage('OTP sent. Please check your phone.');\r\n    } catch (err) {\r\n      setMessage(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleVerifyOtp = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setMessage('');\r\n    try {\r\n      const phoneTrim = phone.trim();\r\n      const codeDigits = (code || '').toString().replace(/\\D/g, '');\r\n      const res = await verifyOtp({ phone: phoneTrim, code: codeDigits });\r\n      // Persist a simple session token and user in localStorage\r\n      localStorage.setItem('upark_token', res.token);\r\n      localStorage.setItem('upark_user', JSON.stringify(res.user));\r\n  // Mark time of auth for potential guards\r\n  localStorage.setItem('upark_authed_at', String(Date.now()));\r\n      // Proceed to collect vehicles for first-time user\r\n      setStep('vehicles');\r\n    } catch (err) {\r\n      setMessage(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleVehiclesSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setMessage('');\r\n    try {\r\n      const phoneTrim = phone.trim();\r\n      const normalized = vehicles\r\n        .map(v => ({ type: v.type === '2W' ? '2W' : '4W', numberPlate: (v.numberPlate || '').trim() }))\r\n        .filter(v => v.numberPlate);\r\n      if (normalized.length === 0) {\r\n        setMessage('Please add at least one vehicle with a number plate.');\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      const res = await updateVehicles({ phone: phoneTrim, vehicles: normalized });\r\n      localStorage.setItem('upark_user', JSON.stringify(res.user));\r\n      // Go to dashboard finally\r\n      navigate('/', { replace: true });\r\n      setTimeout(() => {\r\n        if (window.location.pathname !== '/') window.location.replace('/');\r\n      }, 200);\r\n    } catch (err) {\r\n      setMessage(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"auth-container\">\r\n      {step === 'phone' && (\r\n        <form onSubmit={handleCheckPhone} className=\"auth-form\">\r\n          <h2>Welcome</h2>\r\n          \r\n          {/* Backend Status Indicator */}\r\n          {backendStatus === 'checking' && (\r\n            <div style={{padding: '8px', background: '#fff3cd', border: '1px solid #ffeaa7', borderRadius: '4px', marginBottom: '10px'}}>\r\n              🔄 Connecting to server...\r\n            </div>\r\n          )}\r\n          {backendStatus === 'error' && (\r\n            <div style={{padding: '8px', background: '#f8d7da', border: '1px solid #f5c6cb', borderRadius: '4px', marginBottom: '10px'}}>\r\n              ❌ Cannot connect to backend server\r\n            </div>\r\n          )}\r\n          {backendStatus === 'ok' && (\r\n            <div style={{padding: '8px', background: '#d4edda', border: '1px solid #c3e6cb', borderRadius: '4px', marginBottom: '10px'}}>\r\n              ✅ Connected to server\r\n            </div>\r\n          )}\r\n          \r\n          <input\r\n            type=\"tel\"\r\n            placeholder=\"Phone number (E.164, e.g. +91XXXXXXXXXX)\"\r\n            value={phone}\r\n            onChange={(e) => setPhone(e.target.value)}\r\n            required\r\n          />\r\n          <small style={{marginBottom: 8, display: 'block'}}>Enter your phone number in E.164 format. Example: +91XXXXXXXXXX</small>\r\n          <button type=\"submit\" disabled={loading || backendStatus !== 'ok'}>\r\n            {loading ? 'Checking…' : backendStatus === 'checking' ? 'Connecting...' : 'Continue'}\r\n          </button>\r\n          {message && <p className=\"auth-message\">{message}</p>}\r\n        </form>\r\n      )}\r\n\r\n      {step === 'name' && (\r\n        <form onSubmit={handleRequestOtp} className=\"auth-form\">\r\n          <h2>Complete Signup</h2>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Full name\"\r\n            value={name}\r\n            onChange={(e) => setName(e.target.value)}\r\n            required\r\n          />\r\n          <input\r\n            type=\"tel\"\r\n            placeholder=\"Phone number (E.164, e.g. +91XXXXXXXXXX)\"\r\n            value={phone}\r\n            onChange={(e) => setPhone(e.target.value)}\r\n            required\r\n            disabled\r\n          />\r\n          <button type=\"submit\" disabled={loading}>{loading ? 'Sending…' : 'Send OTP'}</button>\r\n          {message && <p className=\"auth-message\">{message}</p>}\r\n          {devCode && (\r\n            <p className=\"auth-message dev\">Dev OTP: {devCode}</p>\r\n          )}\r\n        </form>\r\n      )}\r\n\r\n      {step === 'otp' && (\r\n        <form onSubmit={handleVerifyOtp} className=\"auth-form\">\r\n          <h2>Enter OTP</h2>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"6-digit code\"\r\n            value={code}\r\n            onChange={(e) => setCode(e.target.value)}\r\n            required\r\n          />\r\n          <button type=\"submit\" disabled={loading}>{loading ? 'Verifying…' : 'Verify'}</button>\r\n          {message && <p className=\"auth-message\">{message}</p>}\r\n          {devCode && (\r\n            <p className=\"auth-message dev\">Dev OTP: {devCode}</p>\r\n          )}\r\n          <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n            <button type=\"button\" disabled={loading} onClick={() => setStep('name')}>Change details</button>\r\n            <button\r\n              type=\"button\"\r\n              disabled={loading}\r\n              onClick={() => (window.location.href = '/')}\r\n              title=\"Go to dashboard\"\r\n            >\r\n              Go to Dashboard\r\n            </button>\r\n          </div>\r\n        </form>\r\n      )}\r\n\r\n      {step === 'vehicles' && (\r\n        <form onSubmit={handleVehiclesSubmit} className=\"auth-form\">\r\n          <h2>Your Vehicles</h2>\r\n          {vehicles.map((v, idx) => (\r\n            <div key={idx} style={{ display: 'flex', gap: 8 }}>\r\n              <select value={v.type} onChange={(e) => {\r\n                const next = [...vehicles];\r\n                next[idx] = { ...next[idx], type: e.target.value };\r\n                setVehicles(next);\r\n              }}>\r\n                <option value=\"2W\">2 Wheeler</option>\r\n                <option value=\"4W\">4 Wheeler</option>\r\n              </select>\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Number plate\"\r\n                value={v.numberPlate}\r\n                onChange={(e) => {\r\n                  const next = [...vehicles];\r\n                  next[idx] = { ...next[idx], numberPlate: e.target.value };\r\n                  setVehicles(next);\r\n                }}\r\n                required\r\n              />\r\n              {vehicles.length > 1 && (\r\n                <button type=\"button\" onClick={() => setVehicles(vehicles.filter((_, i) => i !== idx))}>Remove</button>\r\n              )}\r\n            </div>\r\n          ))}\r\n          <button type=\"button\" onClick={() => setVehicles([...vehicles, { type: '4W', numberPlate: '' }])}>+ Add vehicle</button>\r\n          <button type=\"submit\" disabled={loading}>{loading ? 'Saving…' : 'Save & Continue'}</button>\r\n          {message && <p className=\"auth-message\">{message}</p>}\r\n        </form>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}