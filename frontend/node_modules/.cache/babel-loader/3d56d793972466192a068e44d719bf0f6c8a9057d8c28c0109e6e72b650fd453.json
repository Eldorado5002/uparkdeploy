{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nagas\\\\Desktop\\\\Uparkweb\\\\frontend\\\\src\\\\components\\\\SlotReservation.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport './SlotReservation.css';\nimport socketService from '../services/socketService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SlotReservation = ({\n  user,\n  realtimeSlots\n}) => {\n  _s();\n  const [slots, setSlots] = useState([]);\n  const [selectedSlot, setSelectedSlot] = useState(null);\n  const [showVehicleModal, setShowVehicleModal] = useState(false);\n  const [showPaymentModal, setShowPaymentModal] = useState(false);\n  const [selectedVehicle, setSelectedVehicle] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [refreshing, setRefreshing] = useState(false);\n  const [reservation, setReservation] = useState(null);\n  const [userReservations, setUserReservations] = useState([]);\n  const [message, setMessage] = useState({\n    text: '',\n    type: ''\n  });\n  const [bookingDuration, setBookingDuration] = useState(1);\n  const [durationType, setDurationType] = useState('HOURLY');\n  const [calculatedPrice, setCalculatedPrice] = useState(0);\n  const [bookingProfile, setBookingProfile] = useState(null);\n\n  // Use realtime slots if provided, otherwise fetch from API\n  useEffect(() => {\n    if (realtimeSlots && realtimeSlots.length > 0) {\n      console.log('Using realtime slots:', realtimeSlots);\n      setSlots(realtimeSlots);\n    } else {\n      console.log('No realtime slots provided, fetching from API');\n      fetchSlots();\n    }\n  }, [realtimeSlots]);\n\n  // Update local slots when realtime slots change\n  useEffect(() => {\n    if (realtimeSlots && realtimeSlots.length > 0) {\n      setSlots(realtimeSlots);\n    }\n  }, [realtimeSlots]);\n  useEffect(() => {\n    // Only fetch user-specific data\n    if (user && user.phone) {\n      fetchUserReservations();\n      fetchBookingProfile();\n    }\n\n    // If no realtime slots provided, set up traditional socket subscriptions\n    if (!realtimeSlots || realtimeSlots.length === 0) {\n      // Subscribe to real-time slot updates\n      const unsubscribeSlot = socketService.subscribeToSlotUpdates(data => {\n        console.log(\"SlotReservation: Real-time slot update received:\", data);\n        // Refresh slots when we receive real-time updates\n        fetchSlots();\n      });\n\n      // Subscribe to database slot updates (when hardware data syncs with database)\n      const unsubscribeDatabaseSlot = socketService.subscribeToDatabaseSlotUpdates(data => {\n        console.log(\"SlotReservation: Database slot update received:\", data);\n        // Update local slots state immediately for better user experience\n        setSlots(prevSlots => {\n          const updatedSlots = prevSlots.map(slot => slot.slotNumber === data.slotNumber ? {\n            ...slot,\n            isOccupied: data.isOccupied,\n            isReserved: data.isReserved,\n            reservedBy: data.reservedBy || null,\n            vehicleNumberPlate: data.vehicleNumberPlate || null\n          } : slot);\n          console.log(`Updated slot ${data.slotNumber} locally:`, updatedSlots.find(s => s.slotNumber === data.slotNumber));\n          return updatedSlots;\n        });\n      });\n\n      // Also set up periodic refresh as backup (every 10 seconds)\n      const intervalId = setInterval(() => {\n        fetchSlots();\n      }, 10000);\n\n      // Cleanup subscription and interval on component unmount\n      return () => {\n        unsubscribeSlot();\n        unsubscribeDatabaseSlot();\n        clearInterval(intervalId);\n      };\n    }\n  }, [user, realtimeSlots]);\n  useEffect(() => {\n    if (selectedVehicle) {\n      calculatePrice();\n    }\n  }, [selectedVehicle, bookingDuration, durationType]);\n  const fetchSlots = async () => {\n    try {\n      setRefreshing(true);\n      console.log('Fetching slots...');\n      const response = await fetch('/api/slots');\n      console.log('Response status:', response.status);\n      const data = await response.json();\n      console.log('Fetched slots data:', data);\n      if (data.success) {\n        console.log('Previous slots:', slots.length > 0 ? slots : 'empty');\n        setSlots(data.slots);\n        console.log('Slots set to state:', data.slots);\n        console.log('Available slots count:', data.slots.filter(s => !s.isOccupied && !s.isReserved).length);\n        console.log('Reserved slots count:', data.slots.filter(s => s.isReserved).length);\n        console.log('Occupied slots count:', data.slots.filter(s => s.isOccupied).length);\n      } else {\n        console.error('Failed to fetch slots:', data);\n      }\n    } catch (error) {\n      console.error('Error fetching slots:', error);\n    } finally {\n      setRefreshing(false);\n    }\n  };\n  const fetchUserReservations = async () => {\n    try {\n      const response = await fetch(`/api/reservations/user/${user.phone}`);\n      const data = await response.json();\n      if (data.success) {\n        setUserReservations(data.reservations);\n      }\n    } catch (error) {\n      console.error('Error fetching reservations:', error);\n    }\n  };\n  const fetchBookingProfile = async () => {\n    try {\n      const response = await fetch(`/api/users/booking-profile/${user.phone}`);\n      const data = await response.json();\n      if (data.success) {\n        setBookingProfile(data.profile);\n      }\n    } catch (error) {\n      console.error('Error fetching booking profile:', error);\n    }\n  };\n  const calculatePrice = async () => {\n    if (!selectedVehicle) return;\n    try {\n      const response = await fetch('/api/reservations/calculate-price', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          vehicleType: selectedVehicle.type,\n          duration: bookingDuration,\n          durationType\n        })\n      });\n      const data = await response.json();\n      if (data.success) {\n        setCalculatedPrice(data.pricing.totalAmount);\n      }\n    } catch (error) {\n      console.error('Error calculating price:', error);\n    }\n  };\n  const showMessage = (text, type = 'info') => {\n    setMessage({\n      text,\n      type\n    });\n    setTimeout(() => setMessage({\n      text: '',\n      type: ''\n    }), 5000);\n  };\n  const handleSlotClick = slot => {\n    if (slot.isOccupied || slot.isReserved) {\n      showMessage('This slot is not available', 'error');\n      return;\n    }\n\n    // Check if user already has an active reservation\n    const activeReservation = userReservations.find(r => r.status === 'ACTIVE' && (r.paymentStatus === 'PENDING' || r.paymentStatus === 'COMPLETED'));\n    if (activeReservation) {\n      showMessage('You already have an active reservation', 'error');\n      return;\n    }\n    if (!user.vehicles || user.vehicles.length === 0) {\n      showMessage('Please add vehicles to your profile first', 'error');\n      return;\n    }\n    setSelectedSlot(slot);\n    setShowVehicleModal(true);\n  };\n  const handleVehicleSelect = vehicle => {\n    setSelectedVehicle(vehicle);\n    setShowVehicleModal(false);\n    setShowPaymentModal(true);\n  };\n  const createReservation = async () => {\n    if (!selectedSlot || !selectedVehicle) return;\n    setLoading(true);\n\n    // Only do optimistic update if we're not using realtime slots from parent\n    // (because realtime slots will be updated by the parent component via Socket.IO)\n    const originalSlots = [...slots];\n    if (!realtimeSlots || realtimeSlots.length === 0) {\n      // Optimistic update: immediately mark slot as reserved in UI\n      setSlots(prevSlots => prevSlots.map(slot => slot.slotNumber === selectedSlot.slotNumber ? {\n        ...slot,\n        isReserved: true,\n        reservedBy: user.phone,\n        vehicleNumberPlate: selectedVehicle.numberPlate\n      } : slot));\n    }\n    try {\n      const response = await fetch('/api/reservations/create', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          phone: user.phone,\n          slotNumber: selectedSlot.slotNumber,\n          vehicleNumberPlate: selectedVehicle.numberPlate,\n          vehicleType: selectedVehicle.type,\n          duration: bookingDuration,\n          durationType,\n          bookingStartTime: new Date().toISOString()\n        })\n      });\n      const data = await response.json();\n      if (data.success) {\n        setReservation(data.reservation);\n        showMessage('Reservation created successfully!', 'success');\n        setShowPaymentModal(false);\n        setSelectedSlot(null);\n        setSelectedVehicle(null);\n        setReservation(null);\n        // If using realtime slots, don't fetch - parent will update via Socket.IO\n        if (!realtimeSlots || realtimeSlots.length === 0) {\n          fetchSlots();\n        }\n        fetchUserReservations(); // Refresh user reservations\n        fetchBookingProfile(); // Refresh booking profile\n      } else {\n        // Revert optimistic update on error (only if not using realtime slots)\n        if (!realtimeSlots || realtimeSlots.length === 0) {\n          setSlots(originalSlots);\n        }\n        showMessage(data.error || 'Failed to create reservation', 'error');\n        setShowPaymentModal(false);\n      }\n    } catch (error) {\n      console.error('Error creating reservation:', error);\n      // Revert optimistic update on error (only if not using realtime slots)\n      if (!realtimeSlots || realtimeSlots.length === 0) {\n        setSlots(originalSlots);\n      }\n      showMessage('Failed to create reservation', 'error');\n      setShowPaymentModal(false);\n    }\n    setLoading(false);\n  };\n  const processPayment = async () => {\n    if (!reservation) return;\n    setLoading(true);\n    try {\n      const response = await fetch('/api/reservations/payment', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          reservationId: reservation.id,\n          paymentMethod: 'MOCK'\n        })\n      });\n      const data = await response.json();\n      if (data.success) {\n        showMessage(`Payment successful! Slot ${reservation.slotNumber} is now reserved.`, 'success');\n        setShowPaymentModal(false);\n        setSelectedSlot(null);\n        setSelectedVehicle(null);\n        setReservation(null);\n        fetchSlots(); // Refresh slots\n        fetchUserReservations(); // Refresh user reservations\n      } else {\n        showMessage(data.error || 'Payment failed', 'error');\n      }\n    } catch (error) {\n      console.error('Error processing payment:', error);\n      showMessage('Payment failed', 'error');\n    }\n    setLoading(false);\n  };\n  const cancelReservation = async reservationId => {\n    if (!window.confirm('Are you sure you want to cancel this reservation?')) return;\n    try {\n      const response = await fetch('/api/reservations/cancel', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          reservationId,\n          userPhone: user.phone\n        })\n      });\n      const data = await response.json();\n      if (data.success) {\n        showMessage('Reservation cancelled successfully', 'success');\n        fetchSlots();\n        fetchUserReservations();\n      } else {\n        showMessage(data.error || 'Failed to cancel reservation', 'error');\n      }\n    } catch (error) {\n      console.error('Error cancelling reservation:', error);\n      showMessage('Failed to cancel reservation', 'error');\n    }\n  };\n  const getSlotClass = slot => {\n    if (slot.isOccupied) return 'slot occupied';\n    if (slot.isReserved) return 'slot reserved';\n    return 'slot available';\n  };\n  const getSlotStatus = slot => {\n    if (slot.isOccupied) return 'Occupied';\n    if (slot.isReserved) return 'Reserved';\n    return 'Available';\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"slot-reservation-container\",\n    children: [message.text && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `message ${message.type}`,\n      children: message.text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"header\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\uD83D\\uDE97 Parking Slot Reservation\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"subtitle\",\n        children: \"Select an available slot to make a reservation\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 365,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 363,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      children: /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"admin-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"status-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Parking Status\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"availability-display\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"count-display\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: slots.filter(s => !s.isOccupied && !s.isReserved).length\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 375,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"count-label\",\n                children: \"Available\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 376,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 374,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"count-display\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: slots.length\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 379,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"count-label\",\n                children: \"Total\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 380,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 378,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 373,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 11\n        }, this), bookingProfile && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"control-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\uD83D\\uDC64 Your Profile\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 388,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"status-display\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"status-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"status-label\",\n                children: \"Total Bookings:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 391,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: bookingProfile.totalReservations\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 392,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 390,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"status-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"status-label\",\n                children: \"Active:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 395,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: bookingProfile.activeReservations\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 396,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 394,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"status-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"status-label\",\n                children: \"Total Spent:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 399,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"\\u20B9\", bookingProfile.totalAmountSpent || 0]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 400,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 398,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 389,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 387,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"slots-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: [\"Select a Parking Slot\", refreshing && /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                color: '#3498db',\n                fontSize: '0.8rem',\n                marginLeft: '10px'\n              },\n              children: \"\\uD83D\\uDD04 Refreshing...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 410,\n              columnNumber: 30\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: fetchSlots,\n              style: {\n                marginLeft: '10px',\n                padding: '5px 10px',\n                backgroundColor: '#3498db',\n                color: 'white',\n                border: 'none',\n                borderRadius: '4px',\n                cursor: 'pointer',\n                fontSize: '0.8rem'\n              },\n              disabled: refreshing,\n              children: \"\\uD83D\\uDD04 Refresh\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 411,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 408,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"slots-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"legend\",\n              style: {\n                display: 'flex',\n                justifyContent: 'center',\n                gap: '20px',\n                marginBottom: '20px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"legend-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"legend-color available\",\n                  style: {\n                    display: 'inline-block',\n                    width: '20px',\n                    height: '20px',\n                    backgroundColor: '#2ecc71',\n                    marginRight: '8px'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 431,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Available\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 432,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 430,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"legend-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"legend-color reserved\",\n                  style: {\n                    display: 'inline-block',\n                    width: '20px',\n                    height: '20px',\n                    backgroundColor: '#f39c12',\n                    marginRight: '8px'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 435,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Reserved\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 436,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 434,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"legend-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"legend-color occupied\",\n                  style: {\n                    display: 'inline-block',\n                    width: '20px',\n                    height: '20px',\n                    backgroundColor: '#e74c3c',\n                    marginRight: '8px'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 439,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Occupied\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 440,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 438,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 429,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"parking-grid admin-grid\",\n              children: [console.log('Rendering slots, count:', slots.length, 'slots:', slots), slots.map(slot => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: getSlotClass(slot),\n                onClick: () => handleSlotClick(slot),\n                title: `Slot ${slot.slotNumber} - ${getSlotStatus(slot)}${!slot.isOccupied && !slot.isReserved ? ' - Click to reserve' : ''}`,\n                style: {\n                  cursor: !slot.isOccupied && !slot.isReserved ? 'pointer' : 'default'\n                },\n                children: slot.slotNumber\n              }, slot.slotNumber, false, {\n                fileName: _jsxFileName,\n                lineNumber: 447,\n                columnNumber: 19\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 444,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 428,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 369,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 368,\n      columnNumber: 7\n    }, this), userReservations.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"user-reservations\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\uD83D\\uDCCB Your Reservations\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 466,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"reservations-list\",\n        children: userReservations.filter(r => r.status === 'ACTIVE' || r.paymentStatus === 'PENDING').map(reservation => {\n          var _reservation$status;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"reservation-card\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"reservation-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: [\"Slot #\", reservation.slotNumber]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 473,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"Vehicle: \", reservation.vehicleNumberPlate, \" (\", reservation.vehicleType, \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 474,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"Duration: \", reservation.bookingDuration, \"h (\", reservation.durationType, \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 475,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"Amount: \\u20B9\", reservation.totalAmount]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 476,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"Start: \", new Date(reservation.bookingStartTime).toLocaleString()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 477,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"End: \", new Date(reservation.bookingEndTime).toLocaleString()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 478,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"Status: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `status-${(_reservation$status = reservation.status) === null || _reservation$status === void 0 ? void 0 : _reservation$status.toLowerCase()}`,\n                  children: reservation.status\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 479,\n                  columnNumber: 32\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 479,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                children: [\"Booked: \", new Date(reservation.createdAt).toLocaleString()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 480,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 472,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => cancelReservation(reservation._id),\n              className: \"cancel-btn\",\n              disabled: reservation.status !== 'ACTIVE',\n              children: reservation.status === 'ACTIVE' ? 'Cancel' : 'Cancelled'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 482,\n              columnNumber: 19\n            }, this)]\n          }, reservation._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 471,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 467,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 465,\n      columnNumber: 11\n    }, this), showVehicleModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: [\"Select Vehicle for Slot #\", selectedSlot === null || selectedSlot === void 0 ? void 0 : selectedSlot.slotNumber]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 500,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowVehicleModal(false),\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 501,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 499,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"duration-selection\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"Select Parking Duration\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 505,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"duration-controls\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"duration-type-tabs\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: `duration-tab ${durationType === 'HOURLY' ? 'active' : ''}`,\n                  onClick: () => setDurationType('HOURLY'),\n                  children: \"Hourly\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 508,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: `duration-tab ${durationType === 'DAILY' ? 'active' : ''}`,\n                  onClick: () => setDurationType('DAILY'),\n                  children: \"Daily\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 514,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 507,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"duration-input\",\n                children: /*#__PURE__*/_jsxDEV(\"label\", {\n                  children: [durationType === 'HOURLY' ? 'Hours:' : 'Days:', /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"number\",\n                    min: \"1\",\n                    max: durationType === 'HOURLY' ? '24' : '7',\n                    value: bookingDuration,\n                    onChange: e => setBookingDuration(parseInt(e.target.value) || 1)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 525,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 523,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 522,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 506,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"pricing-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Rates:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 537,\n                  columnNumber: 22\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 537,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"2-Wheeler: \\u20B910/hour or \\u20B980/day\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 538,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"4-Wheeler: \\u20B920/hour or \\u20B9150/day\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 539,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 536,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 504,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"vehicles-list\",\n            children: user.vehicles.map((vehicle, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"vehicle-card\",\n              onClick: () => handleVehicleSelect(vehicle),\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"vehicle-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: vehicle.numberPlate\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 551,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `vehicle-type ${vehicle.type === '2W' ? 'tw' : 'fw'}`,\n                  children: vehicle.type === '2W' ? 'Two Wheeler' : 'Four Wheeler'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 552,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 550,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"vehicle-rate\",\n                children: [\"\\u20B9\", durationType === 'HOURLY' ? (vehicle.type === '2W' ? 10 : 20) * bookingDuration : (vehicle.type === '2W' ? 80 : 150) * Math.ceil(bookingDuration / 24), /*#__PURE__*/_jsxDEV(\"small\", {\n                  children: [\"for \", bookingDuration, \" \", durationType === 'HOURLY' ? 'hour(s)' : 'day(s)']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 561,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 556,\n                columnNumber: 21\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 545,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 543,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 503,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 498,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 497,\n      columnNumber: 9\n    }, this), showPaymentModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal payment-modal\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Confirm Booking\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 576,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowPaymentModal(false),\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 577,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 575,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"booking-summary\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"Booking Details\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 581,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"booking-details\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Slot:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 583,\n                  columnNumber: 22\n                }, this), \" #\", selectedSlot === null || selectedSlot === void 0 ? void 0 : selectedSlot.slotNumber]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 583,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Vehicle:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 584,\n                  columnNumber: 22\n                }, this), \" \", selectedVehicle === null || selectedVehicle === void 0 ? void 0 : selectedVehicle.numberPlate]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 584,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Type:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 585,\n                  columnNumber: 22\n                }, this), \" \", (selectedVehicle === null || selectedVehicle === void 0 ? void 0 : selectedVehicle.type) === '2W' ? 'Two Wheeler' : 'Four Wheeler']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 585,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Duration:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 586,\n                  columnNumber: 22\n                }, this), \" \", bookingDuration, \" \", durationType === 'HOURLY' ? 'hour(s)' : 'day(s)']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 586,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Start Time:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 587,\n                  columnNumber: 22\n                }, this), \" \", new Date().toLocaleString()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 587,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"End Time:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 588,\n                  columnNumber: 22\n                }, this), \" \", new Date(Date.now() + bookingDuration * 60 * 60 * 1000).toLocaleString()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 588,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Total Amount:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 589,\n                  columnNumber: 22\n                }, this), \" \\u20B9\", calculatedPrice]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 589,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 582,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"booking-terms\",\n              children: /*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"terms-checkbox\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"checkbox\",\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 594,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"I agree to the parking terms and conditions\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 595,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 593,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 592,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 580,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: createReservation,\n            disabled: loading,\n            className: \"confirm-booking-btn\",\n            children: loading ? 'Creating Reservation...' : 'Confirm Booking'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 600,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 579,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 574,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 573,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 356,\n    columnNumber: 5\n  }, this);\n};\n_s(SlotReservation, \"UZRbRuWang6oyttGfueYKq35Xp0=\");\n_c = SlotReservation;\nexport default SlotReservation;\nvar _c;\n$RefreshReg$(_c, \"SlotReservation\");","map":{"version":3,"names":["React","useState","useEffect","socketService","jsxDEV","_jsxDEV","SlotReservation","user","realtimeSlots","_s","slots","setSlots","selectedSlot","setSelectedSlot","showVehicleModal","setShowVehicleModal","showPaymentModal","setShowPaymentModal","selectedVehicle","setSelectedVehicle","loading","setLoading","refreshing","setRefreshing","reservation","setReservation","userReservations","setUserReservations","message","setMessage","text","type","bookingDuration","setBookingDuration","durationType","setDurationType","calculatedPrice","setCalculatedPrice","bookingProfile","setBookingProfile","length","console","log","fetchSlots","phone","fetchUserReservations","fetchBookingProfile","unsubscribeSlot","subscribeToSlotUpdates","data","unsubscribeDatabaseSlot","subscribeToDatabaseSlotUpdates","prevSlots","updatedSlots","map","slot","slotNumber","isOccupied","isReserved","reservedBy","vehicleNumberPlate","find","s","intervalId","setInterval","clearInterval","calculatePrice","response","fetch","status","json","success","filter","error","reservations","profile","method","headers","body","JSON","stringify","vehicleType","duration","pricing","totalAmount","showMessage","setTimeout","handleSlotClick","activeReservation","r","paymentStatus","vehicles","handleVehicleSelect","vehicle","createReservation","originalSlots","numberPlate","bookingStartTime","Date","toISOString","processPayment","reservationId","id","paymentMethod","cancelReservation","window","confirm","userPhone","getSlotClass","getSlotStatus","className","children","fileName","_jsxFileName","lineNumber","columnNumber","totalReservations","activeReservations","totalAmountSpent","style","color","fontSize","marginLeft","onClick","padding","backgroundColor","border","borderRadius","cursor","disabled","display","justifyContent","gap","marginBottom","width","height","marginRight","title","_reservation$status","toLocaleString","bookingEndTime","toLowerCase","createdAt","_id","min","max","value","onChange","e","parseInt","target","index","Math","ceil","now","required","_c","$RefreshReg$"],"sources":["C:/Users/nagas/Desktop/Uparkweb/frontend/src/components/SlotReservation.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport './SlotReservation.css';\r\nimport socketService from '../services/socketService';\r\n\r\nconst SlotReservation = ({ user, realtimeSlots }) => {\r\n  const [slots, setSlots] = useState([]);\r\n  const [selectedSlot, setSelectedSlot] = useState(null);\r\n  const [showVehicleModal, setShowVehicleModal] = useState(false);\r\n  const [showPaymentModal, setShowPaymentModal] = useState(false);\r\n  const [selectedVehicle, setSelectedVehicle] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [refreshing, setRefreshing] = useState(false);\r\n  const [reservation, setReservation] = useState(null);\r\n  const [userReservations, setUserReservations] = useState([]);\r\n  const [message, setMessage] = useState({ text: '', type: '' });\r\n  const [bookingDuration, setBookingDuration] = useState(1);\r\n  const [durationType, setDurationType] = useState('HOURLY');\r\n  const [calculatedPrice, setCalculatedPrice] = useState(0);\r\n  const [bookingProfile, setBookingProfile] = useState(null);\r\n\r\n  // Use realtime slots if provided, otherwise fetch from API\r\n  useEffect(() => {\r\n    if (realtimeSlots && realtimeSlots.length > 0) {\r\n      console.log('Using realtime slots:', realtimeSlots);\r\n      setSlots(realtimeSlots);\r\n    } else {\r\n      console.log('No realtime slots provided, fetching from API');\r\n      fetchSlots();\r\n    }\r\n  }, [realtimeSlots]);\r\n\r\n  // Update local slots when realtime slots change\r\n  useEffect(() => {\r\n    if (realtimeSlots && realtimeSlots.length > 0) {\r\n      setSlots(realtimeSlots);\r\n    }\r\n  }, [realtimeSlots]);\r\n\r\n  useEffect(() => {\r\n    // Only fetch user-specific data\r\n    if (user && user.phone) {\r\n      fetchUserReservations();\r\n      fetchBookingProfile();\r\n    }\r\n\r\n    // If no realtime slots provided, set up traditional socket subscriptions\r\n    if (!realtimeSlots || realtimeSlots.length === 0) {\r\n      // Subscribe to real-time slot updates\r\n      const unsubscribeSlot = socketService.subscribeToSlotUpdates((data) => {\r\n        console.log(\"SlotReservation: Real-time slot update received:\", data);\r\n        // Refresh slots when we receive real-time updates\r\n        fetchSlots();\r\n      });\r\n\r\n      // Subscribe to database slot updates (when hardware data syncs with database)\r\n      const unsubscribeDatabaseSlot = socketService.subscribeToDatabaseSlotUpdates((data) => {\r\n        console.log(\"SlotReservation: Database slot update received:\", data);\r\n        // Update local slots state immediately for better user experience\r\n        setSlots(prevSlots => {\r\n          const updatedSlots = prevSlots.map(slot => \r\n            slot.slotNumber === data.slotNumber \r\n              ? { \r\n                  ...slot, \r\n                  isOccupied: data.isOccupied, \r\n                  isReserved: data.isReserved,\r\n                  reservedBy: data.reservedBy || null,\r\n                  vehicleNumberPlate: data.vehicleNumberPlate || null\r\n                }\r\n              : slot\r\n          );\r\n          console.log(`Updated slot ${data.slotNumber} locally:`, updatedSlots.find(s => s.slotNumber === data.slotNumber));\r\n          return updatedSlots;\r\n        });\r\n      });\r\n\r\n      // Also set up periodic refresh as backup (every 10 seconds)\r\n      const intervalId = setInterval(() => {\r\n        fetchSlots();\r\n      }, 10000);\r\n\r\n      // Cleanup subscription and interval on component unmount\r\n      return () => {\r\n        unsubscribeSlot();\r\n        unsubscribeDatabaseSlot();\r\n        clearInterval(intervalId);\r\n      };\r\n    }\r\n  }, [user, realtimeSlots]);\r\n\r\n  useEffect(() => {\r\n    if (selectedVehicle) {\r\n      calculatePrice();\r\n    }\r\n  }, [selectedVehicle, bookingDuration, durationType]);\r\n\r\n  const fetchSlots = async () => {\r\n    try {\r\n      setRefreshing(true);\r\n      console.log('Fetching slots...');\r\n      const response = await fetch('/api/slots');\r\n      console.log('Response status:', response.status);\r\n      const data = await response.json();\r\n      console.log('Fetched slots data:', data);\r\n      if (data.success) {\r\n        console.log('Previous slots:', slots.length > 0 ? slots : 'empty');\r\n        setSlots(data.slots);\r\n        console.log('Slots set to state:', data.slots);\r\n        console.log('Available slots count:', data.slots.filter(s => !s.isOccupied && !s.isReserved).length);\r\n        console.log('Reserved slots count:', data.slots.filter(s => s.isReserved).length);\r\n        console.log('Occupied slots count:', data.slots.filter(s => s.isOccupied).length);\r\n      } else {\r\n        console.error('Failed to fetch slots:', data);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching slots:', error);\r\n    } finally {\r\n      setRefreshing(false);\r\n    }\r\n  };\r\n\r\n  const fetchUserReservations = async () => {\r\n    try {\r\n      const response = await fetch(`/api/reservations/user/${user.phone}`);\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        setUserReservations(data.reservations);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching reservations:', error);\r\n    }\r\n  };\r\n\r\n  const fetchBookingProfile = async () => {\r\n    try {\r\n      const response = await fetch(`/api/users/booking-profile/${user.phone}`);\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        setBookingProfile(data.profile);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching booking profile:', error);\r\n    }\r\n  };\r\n\r\n  const calculatePrice = async () => {\r\n    if (!selectedVehicle) return;\r\n    \r\n    try {\r\n      const response = await fetch('/api/reservations/calculate-price', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          vehicleType: selectedVehicle.type,\r\n          duration: bookingDuration,\r\n          durationType\r\n        })\r\n      });\r\n\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        setCalculatedPrice(data.pricing.totalAmount);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error calculating price:', error);\r\n    }\r\n  };\r\n\r\n  const showMessage = (text, type = 'info') => {\r\n    setMessage({ text, type });\r\n    setTimeout(() => setMessage({ text: '', type: '' }), 5000);\r\n  };\r\n\r\n  const handleSlotClick = (slot) => {\r\n    if (slot.isOccupied || slot.isReserved) {\r\n      showMessage('This slot is not available', 'error');\r\n      return;\r\n    }\r\n\r\n    // Check if user already has an active reservation\r\n    const activeReservation = userReservations.find(r => \r\n      r.status === 'ACTIVE' && (r.paymentStatus === 'PENDING' || r.paymentStatus === 'COMPLETED')\r\n    );\r\n    \r\n    if (activeReservation) {\r\n      showMessage('You already have an active reservation', 'error');\r\n      return;\r\n    }\r\n\r\n    if (!user.vehicles || user.vehicles.length === 0) {\r\n      showMessage('Please add vehicles to your profile first', 'error');\r\n      return;\r\n    }\r\n\r\n    setSelectedSlot(slot);\r\n    setShowVehicleModal(true);\r\n  };\r\n\r\n  const handleVehicleSelect = (vehicle) => {\r\n    setSelectedVehicle(vehicle);\r\n    setShowVehicleModal(false);\r\n    setShowPaymentModal(true);\r\n  };\r\n\r\n  const createReservation = async () => {\r\n    if (!selectedSlot || !selectedVehicle) return;\r\n\r\n    setLoading(true);\r\n    \r\n    // Only do optimistic update if we're not using realtime slots from parent\r\n    // (because realtime slots will be updated by the parent component via Socket.IO)\r\n    const originalSlots = [...slots];\r\n    if (!realtimeSlots || realtimeSlots.length === 0) {\r\n      // Optimistic update: immediately mark slot as reserved in UI\r\n      setSlots(prevSlots => \r\n        prevSlots.map(slot => \r\n          slot.slotNumber === selectedSlot.slotNumber \r\n            ? { ...slot, isReserved: true, reservedBy: user.phone, vehicleNumberPlate: selectedVehicle.numberPlate }\r\n            : slot\r\n        )\r\n      );\r\n    }\r\n    \r\n    try {\r\n      const response = await fetch('/api/reservations/create', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          phone: user.phone,\r\n          slotNumber: selectedSlot.slotNumber,\r\n          vehicleNumberPlate: selectedVehicle.numberPlate,\r\n          vehicleType: selectedVehicle.type,\r\n          duration: bookingDuration,\r\n          durationType,\r\n          bookingStartTime: new Date().toISOString()\r\n        })\r\n      });\r\n\r\n      const data = await response.json();\r\n      \r\n      if (data.success) {\r\n        setReservation(data.reservation);\r\n        showMessage('Reservation created successfully!', 'success');\r\n        setShowPaymentModal(false);\r\n        setSelectedSlot(null);\r\n        setSelectedVehicle(null);\r\n        setReservation(null);\r\n        // If using realtime slots, don't fetch - parent will update via Socket.IO\r\n        if (!realtimeSlots || realtimeSlots.length === 0) {\r\n          fetchSlots();\r\n        }\r\n        fetchUserReservations(); // Refresh user reservations\r\n        fetchBookingProfile(); // Refresh booking profile\r\n      } else {\r\n        // Revert optimistic update on error (only if not using realtime slots)\r\n        if (!realtimeSlots || realtimeSlots.length === 0) {\r\n          setSlots(originalSlots);\r\n        }\r\n        showMessage(data.error || 'Failed to create reservation', 'error');\r\n        setShowPaymentModal(false);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error creating reservation:', error);\r\n      // Revert optimistic update on error (only if not using realtime slots)\r\n      if (!realtimeSlots || realtimeSlots.length === 0) {\r\n        setSlots(originalSlots);\r\n      }\r\n      showMessage('Failed to create reservation', 'error');\r\n      setShowPaymentModal(false);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const processPayment = async () => {\r\n    if (!reservation) return;\r\n\r\n    setLoading(true);\r\n    try {\r\n      const response = await fetch('/api/reservations/payment', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          reservationId: reservation.id,\r\n          paymentMethod: 'MOCK'\r\n        })\r\n      });\r\n\r\n      const data = await response.json();\r\n      \r\n      if (data.success) {\r\n        showMessage(`Payment successful! Slot ${reservation.slotNumber} is now reserved.`, 'success');\r\n        setShowPaymentModal(false);\r\n        setSelectedSlot(null);\r\n        setSelectedVehicle(null);\r\n        setReservation(null);\r\n        fetchSlots(); // Refresh slots\r\n        fetchUserReservations(); // Refresh user reservations\r\n      } else {\r\n        showMessage(data.error || 'Payment failed', 'error');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error processing payment:', error);\r\n      showMessage('Payment failed', 'error');\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const cancelReservation = async (reservationId) => {\r\n    if (!window.confirm('Are you sure you want to cancel this reservation?')) return;\r\n\r\n    try {\r\n      const response = await fetch('/api/reservations/cancel', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          reservationId,\r\n          userPhone: user.phone\r\n        })\r\n      });\r\n\r\n      const data = await response.json();\r\n      \r\n      if (data.success) {\r\n        showMessage('Reservation cancelled successfully', 'success');\r\n        fetchSlots();\r\n        fetchUserReservations();\r\n      } else {\r\n        showMessage(data.error || 'Failed to cancel reservation', 'error');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error cancelling reservation:', error);\r\n      showMessage('Failed to cancel reservation', 'error');\r\n    }\r\n  };\r\n\r\n  const getSlotClass = (slot) => {\r\n    if (slot.isOccupied) return 'slot occupied';\r\n    if (slot.isReserved) return 'slot reserved';\r\n    return 'slot available';\r\n  };\r\n\r\n  const getSlotStatus = (slot) => {\r\n    if (slot.isOccupied) return 'Occupied';\r\n    if (slot.isReserved) return 'Reserved';\r\n    return 'Available';\r\n  };\r\n\r\n  return (\r\n    <div className=\"slot-reservation-container\">\r\n      {message.text && (\r\n        <div className={`message ${message.type}`}>\r\n          {message.text}\r\n        </div>\r\n      )}\r\n\r\n      <header>\r\n        <h1> Parking Slot Reservation</h1>\r\n        <p className=\"subtitle\">Select an available slot to make a reservation</p>\r\n      </header>\r\n\r\n      <main>\r\n        <section className=\"admin-section\">\r\n          {/* Status Overview Card */}\r\n          <div className=\"status-card\">\r\n            <h2>Parking Status</h2>\r\n            <div className=\"availability-display\">\r\n              <div className=\"count-display\">\r\n                <span>{slots.filter(s => !s.isOccupied && !s.isReserved).length}</span>\r\n                <span className=\"count-label\">Available</span>\r\n              </div>\r\n              <div className=\"count-display\">\r\n                <span>{slots.length}</span>\r\n                <span className=\"count-label\">Total</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* User Booking Profile */}\r\n          {bookingProfile && (\r\n            <div className=\"control-card\">\r\n              <h2> Your Profile</h2>\r\n              <div className=\"status-display\">\r\n                <div className=\"status-item\">\r\n                  <span className=\"status-label\">Total Bookings:</span>\r\n                  <span>{bookingProfile.totalReservations}</span>\r\n                </div>\r\n                <div className=\"status-item\">\r\n                  <span className=\"status-label\">Active:</span>\r\n                  <span>{bookingProfile.activeReservations}</span>\r\n                </div>\r\n                <div className=\"status-item\">\r\n                  <span className=\"status-label\">Total Spent:</span>\r\n                  <span>{bookingProfile.totalAmountSpent || 0}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Parking Slots Grid Card */}\r\n          <div className=\"slots-card\">\r\n            <h2>\r\n              Select a Parking Slot \r\n              {refreshing && <span style={{color: '#3498db', fontSize: '0.8rem', marginLeft: '10px'}}> Refreshing...</span>}\r\n              <button \r\n                onClick={fetchSlots} \r\n                style={{\r\n                  marginLeft: '10px', \r\n                  padding: '5px 10px', \r\n                  backgroundColor: '#3498db', \r\n                  color: 'white', \r\n                  border: 'none', \r\n                  borderRadius: '4px', \r\n                  cursor: 'pointer',\r\n                  fontSize: '0.8rem'\r\n                }}\r\n                disabled={refreshing}\r\n              >\r\n                 Refresh\r\n              </button>\r\n            </h2>\r\n            <div className=\"slots-container\">\r\n              <div className=\"legend\" style={{display: 'flex', justifyContent: 'center', gap: '20px', marginBottom: '20px'}}>\r\n                <div className=\"legend-item\">\r\n                  <span className=\"legend-color available\" style={{display: 'inline-block', width: '20px', height: '20px', backgroundColor: '#2ecc71', marginRight: '8px'}}></span>\r\n                  <span>Available</span>\r\n                </div>\r\n                <div className=\"legend-item\">\r\n                  <span className=\"legend-color reserved\" style={{display: 'inline-block', width: '20px', height: '20px', backgroundColor: '#f39c12', marginRight: '8px'}}></span>\r\n                  <span>Reserved</span>\r\n                </div>\r\n                <div className=\"legend-item\">\r\n                  <span className=\"legend-color occupied\" style={{display: 'inline-block', width: '20px', height: '20px', backgroundColor: '#e74c3c', marginRight: '8px'}}></span>\r\n                  <span>Occupied</span>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"parking-grid admin-grid\">\r\n                {console.log('Rendering slots, count:', slots.length, 'slots:', slots)}\r\n                {slots.map(slot => (\r\n                  <div\r\n                    key={slot.slotNumber}\r\n                    className={getSlotClass(slot)}\r\n                    onClick={() => handleSlotClick(slot)}\r\n                    title={`Slot ${slot.slotNumber} - ${getSlotStatus(slot)}${!slot.isOccupied && !slot.isReserved ? ' - Click to reserve' : ''}`}\r\n                    style={{cursor: (!slot.isOccupied && !slot.isReserved) ? 'pointer' : 'default'}}\r\n                  >\r\n                    {slot.slotNumber}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </section>\r\n      </main>\r\n\r\n        {/* Active Reservations */}\r\n        {userReservations.length > 0 && (\r\n          <div className=\"user-reservations\">\r\n            <h3> Your Reservations</h3>\r\n            <div className=\"reservations-list\">\r\n              {userReservations\r\n                .filter(r => r.status === 'ACTIVE' || r.paymentStatus === 'PENDING')\r\n                .map(reservation => (\r\n                <div key={reservation._id} className=\"reservation-card\">\r\n                  <div className=\"reservation-info\">\r\n                    <strong>Slot #{reservation.slotNumber}</strong>\r\n                    <p>Vehicle: {reservation.vehicleNumberPlate} ({reservation.vehicleType})</p>\r\n                    <p>Duration: {reservation.bookingDuration}h ({reservation.durationType})</p>\r\n                    <p>Amount: {reservation.totalAmount}</p>\r\n                    <p>Start: {new Date(reservation.bookingStartTime).toLocaleString()}</p>\r\n                    <p>End: {new Date(reservation.bookingEndTime).toLocaleString()}</p>\r\n                    <p>Status: <span className={`status-${reservation.status?.toLowerCase()}`}>{reservation.status}</span></p>\r\n                    <small>Booked: {new Date(reservation.createdAt).toLocaleString()}</small>\r\n                  </div>\r\n                  <button \r\n                    onClick={() => cancelReservation(reservation._id)}\r\n                    className=\"cancel-btn\"\r\n                    disabled={reservation.status !== 'ACTIVE'}\r\n                  >\r\n                    {reservation.status === 'ACTIVE' ? 'Cancel' : 'Cancelled'}\r\n                  </button>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n      {/* Vehicle Selection Modal */}\r\n      {showVehicleModal && (\r\n        <div className=\"modal-overlay\">\r\n          <div className=\"modal\">\r\n            <div className=\"modal-header\">\r\n              <h3>Select Vehicle for Slot #{selectedSlot?.slotNumber}</h3>\r\n              <button onClick={() => setShowVehicleModal(false)}></button>\r\n            </div>\r\n            <div className=\"modal-body\">\r\n              <div className=\"duration-selection\">\r\n                <h4>Select Parking Duration</h4>\r\n                <div className=\"duration-controls\">\r\n                  <div className=\"duration-type-tabs\">\r\n                    <button \r\n                      className={`duration-tab ${durationType === 'HOURLY' ? 'active' : ''}`}\r\n                      onClick={() => setDurationType('HOURLY')}\r\n                    >\r\n                      Hourly\r\n                    </button>\r\n                    <button \r\n                      className={`duration-tab ${durationType === 'DAILY' ? 'active' : ''}`}\r\n                      onClick={() => setDurationType('DAILY')}\r\n                    >\r\n                      Daily\r\n                    </button>\r\n                  </div>\r\n                  \r\n                  <div className=\"duration-input\">\r\n                    <label>\r\n                      {durationType === 'HOURLY' ? 'Hours:' : 'Days:'}\r\n                      <input \r\n                        type=\"number\" \r\n                        min=\"1\" \r\n                        max={durationType === 'HOURLY' ? '24' : '7'} \r\n                        value={bookingDuration}\r\n                        onChange={(e) => setBookingDuration(parseInt(e.target.value) || 1)}\r\n                      />\r\n                    </label>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"pricing-info\">\r\n                  <p><strong>Rates:</strong></p>\r\n                  <p>2-Wheeler: 10/hour or 80/day</p>\r\n                  <p>4-Wheeler: 20/hour or 150/day</p>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"vehicles-list\">\r\n                {user.vehicles.map((vehicle, index) => (\r\n                  <div \r\n                    key={index}\r\n                    className=\"vehicle-card\"\r\n                    onClick={() => handleVehicleSelect(vehicle)}\r\n                  >\r\n                    <div className=\"vehicle-info\">\r\n                      <strong>{vehicle.numberPlate}</strong>\r\n                      <span className={`vehicle-type ${vehicle.type === '2W' ? 'tw' : 'fw'}`}>\r\n                        {vehicle.type === '2W' ? 'Two Wheeler' : 'Four Wheeler'}\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"vehicle-rate\">\r\n                      {durationType === 'HOURLY' \r\n                        ? (vehicle.type === '2W' ? 10 : 20) * bookingDuration\r\n                        : (vehicle.type === '2W' ? 80 : 150) * Math.ceil(bookingDuration / 24)\r\n                      }\r\n                      <small>for {bookingDuration} {durationType === 'HOURLY' ? 'hour(s)' : 'day(s)'}</small>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Booking Confirmation Modal */}\r\n      {showPaymentModal && (\r\n        <div className=\"modal-overlay\">\r\n          <div className=\"modal payment-modal\">\r\n            <div className=\"modal-header\">\r\n              <h3>Confirm Booking</h3>\r\n              <button onClick={() => setShowPaymentModal(false)}></button>\r\n            </div>\r\n            <div className=\"modal-body\">\r\n              <div className=\"booking-summary\">\r\n                <h4>Booking Details</h4>\r\n                <div className=\"booking-details\">\r\n                  <p><strong>Slot:</strong> #{selectedSlot?.slotNumber}</p>\r\n                  <p><strong>Vehicle:</strong> {selectedVehicle?.numberPlate}</p>\r\n                  <p><strong>Type:</strong> {selectedVehicle?.type === '2W' ? 'Two Wheeler' : 'Four Wheeler'}</p>\r\n                  <p><strong>Duration:</strong> {bookingDuration} {durationType === 'HOURLY' ? 'hour(s)' : 'day(s)'}</p>\r\n                  <p><strong>Start Time:</strong> {new Date().toLocaleString()}</p>\r\n                  <p><strong>End Time:</strong> {new Date(Date.now() + bookingDuration * 60 * 60 * 1000).toLocaleString()}</p>\r\n                  <p><strong>Total Amount:</strong> {calculatedPrice}</p>\r\n                </div>\r\n                \r\n                <div className=\"booking-terms\">\r\n                  <label className=\"terms-checkbox\">\r\n                    <input type=\"checkbox\" required />\r\n                    <span>I agree to the parking terms and conditions</span>\r\n                  </label>\r\n                </div>\r\n              </div>\r\n              \r\n              <button \r\n                onClick={createReservation}\r\n                disabled={loading}\r\n                className=\"confirm-booking-btn\"\r\n              >\r\n                {loading ? 'Creating Reservation...' : 'Confirm Booking'}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SlotReservation;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}